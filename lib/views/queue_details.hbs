<nav class="nav-extended">
    <div class="nav-content">
        <ul class="tabs tabs-transparent">
            <li class="tab"><a class="{{ setActive jobType "delayed" }}" href="/{{ queue }}?types=delayed">Delayed <span class="badge custom-badge white">{{ jobCounts.jobCounts.delayed }}</span></a></li>
            <li class="tab"><a class="{{ setActive jobType "waiting" }}" href="/{{ queue }}?types=waiting">Waiting <span class="badge custom-badge white" data-badge-caption=""> {{ jobCounts.jobCounts.waiting }} </span></a></li>
            <li class="tab"><a class="{{ setActive jobType "active" }}" href="/{{ queue }}?types=active">Active <span class="badge custom-badge white" data-badge-caption=""> {{ jobCounts.jobCounts.active }} </span></a></li>
            <li class="tab"><a class="{{ setActive jobType "paused" }}" href="/{{ queue }}?types=paused">Paused <span class="badge custom-badge white" data-badge-caption=""> {{ jobCounts.jobCounts.paused }} </span></a></li>
            <li class="tab"><a class="{{ setActive jobType "completed" }}" href="/{{ queue }}?types=completed">Completed <span class="badge custom-badge white" data-badge-caption=""> {{ jobCounts.jobCounts.completed }} </span></a></li>
            <li class="tab"><a class="{{ setActive jobType "failed" }}" href="/{{ queue }}?types=failed">Failed <span class="badge custom-badge white" data-badge-caption=""> {{ jobCounts.jobCounts.failed }} </span></a></li>
        </ul>
    </div>
</nav>
<div class="container">
    <ul class="collapsible popout">
        {{#each jobList}}
        <li>
            <div class="collapsible-header">
                <i class="material-icons">linear_scale</i>
                <div class="row job-title">
                    <div class="s2">
                        <b class="left">#{{this.id}}</b>
                    </div>
                    <div class="s6 blue-grey lighten-4" style="width: 25%">
                        <div class="light-green accent-2 center" style="width:{{ verifyJobProgress this.progress this.status}}%">Progress:{{ verifyJobProgress this.progress this.status}}%</div>
                    </div>
                    <div class="s4">
                        {{ this.timestamp }}
                    </div>
                </div>
            </div>
            <div class="collapsible-body">
                <div class="row">
                    {{#if this.processedOn}}
                        <div class="chip blue white-text">
                            Processed On: {{ this.processedOn }}
                        </div>
                    {{/if}}
                    {{#if this.finishedOn}}
                        <div class="chip green white-text">
                            Finished On: {{ this.finishedOn }}
                        </div>
                    {{/if}}
                    {{#if this.attemptsMade}}
                        <div class="chip teal white-text">
                            Attempts Made: {{ this.attemptsMade }}
                        </div>
                    {{/if}}

                    {{#if this.stacktrace.length}}
                        <div class="chip red lighten-1 white-text"  >
                            <a class="modal-trigger white-text stack-trace-logs" data-trace="{{ stringify this.stacktrace }}" href="#log-modal">Stacktrace</a>
                        </div>
                    {{else}}
                        <div class="chip grey lighten-1 white-text">
                            Stacktrace
                        </div>
                    {{/if}}
                    <div class="chip yellow darken-3 white-text">
                        <a class="modal-trigger white-text show-logs" data-queue="{{this.queue}}" data-jobId="{{this.id}}" href="#log-modal">Show Logs</a>
                    </div>
                </div>
                <div class="row">
                    <div class="col s12 m6 l12">
                       <div class="row" style="display: flex; justify-content: space-between; width: 100%">
                           <div class="card deep-orange lighten-3 col s6 m6 l6 hoverable">
                               <div class="card-content black-text">
                                   <span class="card-title">Data</span>
                                   <table>
                                       {{#each this.data}}
                                           <tr>
                                               <th>{{@key}}</th>
                                               <td>{{this}}</td>
                                           </tr>
                                       {{/each}}
                                   </table>
                               </div>
                           </div>
                           <div class="card blue-grey darken-1 col s6 m6 l5 hoverable">
                               <div class="card-content white-text">
                                   <span class="card-title">Options</span>
                                   <table>
                                       {{#each this.opts}}
                                           <tr>
                                               <th>{{@key}}</th>
                                               <td>{{this}}</td>
                                           </tr>
                                       {{/each}}
                                   </table>
                               </div>
                           </div>
                       </div>
                    </div>
                </div>
            </div>
        </li>
        {{else}}
            <p>Sorry! Not Jobs Found</p>
        {{/each}}
    </ul>
</div>


<div id="log-modal" class="modal bottom-sheet">
    <div class="modal-content">
        <h4>Logs</h4>
        <div id="log-modal-body">

        </div>
    </div>
    <div class="modal-footer">

    </div>
</div>
